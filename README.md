# 🔌 ربات اطلاع‌رسانی خاموشی برق‌من

این ربات تلگرام با هدف اطلاع‌رسانی به کاربران درباره‌ی زمان‌های خاموشی برق طراحی شده است.  
آی‌دی ربات: [@Bargheman1_bot](https://t.me/Bargheman1_bot)

---

## 🛠 نحوه عملکرد ربات

- کاربران با ارسال شماره قبض برق خود، خاموشی‌های ثبت‌شده و خاموشی‌های برنامه‌ریزی‌شده مربوط به آن قبض را دریافت می‌کنند.
- درخواست‌ها به سرویس برق‌من (`uiapi.saapa.ir`) فرستاده می‌شود.
- پاسخ‌ها پردازش شده و به صورت پیام‌های واضح و خوانا به کاربر ارسال می‌شود.

---

## 🌐 استفاده از پراکسی

با توجه به اینکه سرورهای برق‌من از خارج از شبکه ایران در دسترس نیستند، یک پراکسی ساده با PHP طراحی شده است:

- ربات درخواست‌های خود را به یک هاست ایرانی ارسال می‌کند.
- پراکسی درخواست‌ها را به سرور اصلی (`https://uiapi.saapa.ir`) هدایت می‌کند.
- پاسخ سرور دریافت و بدون تغییر به ربات بازگردانده می‌شود.

فایل پراکسی در مسیر هاست ایرانی قرار دارد و آدرس‌های API در کد ربات به آدرس پراکسی اشاره می‌کنند.

---

## 🛡 ملاحظات امنیتی

- **رمزنگاری داده‌ها**: داده‌های کاربران با استفاده از رمزنگاری Fernet محافظت می‌شوند.
- **مدیریت کلیدها**: کلیدهای رمزنگاری به صورت امن نگهداری می‌شوند.
- **امنیت لاگ‌ها**: اطلاعات حساس در لاگ‌ها ذخیره نمی‌شود.
- **اعتبارسنجی ورودی‌ها**: ورودی‌های کاربران قبل از پردازش اعتبارسنجی می‌شوند.

---

## 📦 پیش‌نیازها

- Python 3.8 یا بالاتر
- pip (مدیریت پکیج‌های پایتون)

---

## 🚀 نصب و راه‌اندازی

1. مخزن را کلون کنید:
```bash
git clone [آدرس مخزن]
cd [نام پوشه]
```

2. محیط مجازی بسازید:
```bash
python -m venv venv
source venv/bin/activate  # در لینوکس/مک
# یا
venv\Scripts\activate  # در ویندوز
```

3. نصب پکیج‌های مورد نیاز:
```bash
pip install -r requirements.txt
```

4. ایجاد فایل تنظیمات محیطی:
```bash
cp .env.example .env
```

5. ویرایش فایل `.env` و وارد کردن توکن ربات تلگرام:
```
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

6. اجرای ربات:
```bash
python bot_test_p.py
```

---

## 🗂 ساختار پروژه

- `bot_test_p.py`: فایل اصلی و شروع ربات
- `config.py`: فایل پیکربندی تنظیمات پروژه
- `utils.py`: توابع کمکی برای پردازش داده‌ها
- `user_data.json`: ذخیره رمزنگاری‌شده داده‌های کاربران
- `.env`: متغیرهای محیطی پروژه (نباید در کنترل نسخه ذخیره شود)

---

## 📜 مجوز

این پروژه تحت مجوز MIT منتشر شده است.

---